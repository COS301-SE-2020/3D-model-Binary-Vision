function cov_2h99awej7m(){var path="/home/marcus/UNI/Year 3/COS 301/Capstone/Feature-Improvments/3D-model-Binary-Vision/Application/api/controller/UploadController.js";var hash="a7fab2ba5760dad870f86e3b52fe355f47fbb21d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/marcus/UNI/Year 3/COS 301/Capstone/Feature-Improvments/3D-model-Binary-Vision/Application/api/controller/UploadController.js",statementMap:{"0":{start:{line:4,column:19},end:{line:4,column:40}},"1":{start:{line:5,column:24},end:{line:5,column:50}},"2":{start:{line:6,column:17},end:{line:6,column:36}},"3":{start:{line:7,column:15},end:{line:7,column:32}},"4":{start:{line:8,column:11},end:{line:8,column:24}},"5":{start:{line:9,column:13},end:{line:9,column:28}},"6":{start:{line:10,column:18},end:{line:10,column:42}},"7":{start:{line:13,column:0},end:{line:89,column:1}},"8":{start:{line:20,column:21},end:{line:20,column:52}},"9":{start:{line:22,column:8},end:{line:87,column:10}},"10":{start:{line:24,column:12},end:{line:28,column:13}},"11":{start:{line:26,column:16},end:{line:26,column:33}},"12":{start:{line:27,column:16},end:{line:27,column:23}},"13":{start:{line:29,column:27},end:{line:29,column:32}},"14":{start:{line:31,column:12},end:{line:85,column:13}},"15":{start:{line:34,column:16},end:{line:34,column:50}},"16":{start:{line:35,column:16},end:{line:35,column:23}},"17":{start:{line:42,column:24},end:{line:42,column:50}},"18":{start:{line:43,column:16},end:{line:43,column:34}},"19":{start:{line:44,column:16},end:{line:46,column:17}},"20":{start:{line:45,column:20},end:{line:45,column:76}},"21":{start:{line:50,column:27},end:{line:50,column:67}},"22":{start:{line:53,column:16},end:{line:81,column:18}},"23":{start:{line:54,column:20},end:{line:80,column:21}},"24":{start:{line:62,column:38},end:{line:62,column:77}},"25":{start:{line:63,column:41},end:{line:63,column:97}},"26":{start:{line:65,column:41},end:{line:65,column:54}},"27":{start:{line:66,column:24},end:{line:75,column:27}},"28":{start:{line:68,column:28},end:{line:74,column:29}},"29":{start:{line:70,column:32},end:{line:70,column:85}},"30":{start:{line:73,column:32},end:{line:73,column:48}},"31":{start:{line:79,column:24},end:{line:79,column:44}},"32":{start:{line:83,column:16},end:{line:83,column:32}},"33":{start:{line:84,column:16},end:{line:84,column:23}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:18,column:18},end:{line:18,column:19}},loc:{start:{line:18,column:36},end:{line:88,column:5}},line:18},"1":{name:"(anonymous_1)",decl:{start:{line:22,column:24},end:{line:22,column:25}},loc:{start:{line:23,column:8},end:{line:86,column:9}},line:23},"2":{name:"(anonymous_2)",decl:{start:{line:53,column:31},end:{line:53,column:32}},loc:{start:{line:53,column:37},end:{line:81,column:17}},line:53},"3":{name:"(anonymous_3)",decl:{start:{line:66,column:61},end:{line:66,column:62}},loc:{start:{line:66,column:81},end:{line:75,column:25}},line:66}},branchMap:{"0":{loc:{start:{line:24,column:12},end:{line:28,column:13}},type:"if",locations:[{start:{line:24,column:12},end:{line:28,column:13}},{start:{line:24,column:12},end:{line:28,column:13}}],line:24},"1":{loc:{start:{line:31,column:12},end:{line:85,column:13}},type:"if",locations:[{start:{line:31,column:12},end:{line:85,column:13}},{start:{line:31,column:12},end:{line:85,column:13}}],line:31},"2":{loc:{start:{line:54,column:20},end:{line:80,column:21}},type:"if",locations:[{start:{line:54,column:20},end:{line:80,column:21}},{start:{line:54,column:20},end:{line:80,column:21}}],line:54},"3":{loc:{start:{line:68,column:28},end:{line:74,column:29}},type:"if",locations:[{start:{line:68,column:28},end:{line:74,column:29}},{start:{line:68,column:28},end:{line:74,column:29}}],line:68}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a7fab2ba5760dad870f86e3b52fe355f47fbb21d"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2h99awej7m=function(){return actualCoverage;};}return actualCoverage;}cov_2h99awej7m();//file creates by: Jacobus Janse van Rensburg
//controller for all the uploads and retrievals as well as the integrating of the c++ program 
const formidable=(cov_2h99awej7m().s[0]++,require("formidable"));const{createModel}=(cov_2h99awej7m().s[1]++,require('mongoose-gridfs'));const mongoose=(cov_2h99awej7m().s[2]++,require("mongoose"));const multer=(cov_2h99awej7m().s[3]++,require('multer'));const fs=(cov_2h99awej7m().s[4]++,require('fs'));const path=(cov_2h99awej7m().s[5]++,require('path'));const{spawn}=(cov_2h99awej7m().s[6]++,require('child_process'));cov_2h99awej7m().s[7]++;module.exports={//================================================================================================
// Function developed by: Jacobus Janse van Rensburg
// Function used to upload multiple images , store them in a temp directory/file and start the c++ program
uploadImages:function(req,res){cov_2h99awej7m().f[0]++;const form=(cov_2h99awej7m().s[8]++,formidable({multiples:true}));cov_2h99awej7m().s[9]++;form.parse(req,(err,fields,files)=>{cov_2h99awej7m().f[1]++;cov_2h99awej7m().s[10]++;if(err){cov_2h99awej7m().b[0][0]++;cov_2h99awej7m().s[11]++;console.log(err);cov_2h99awej7m().s[12]++;return;}else{cov_2h99awej7m().b[0][1]++;}const images=(cov_2h99awej7m().s[13]++,files);cov_2h99awej7m().s[14]++;if(!images){cov_2h99awej7m().b[1][0]++;cov_2h99awej7m().s[15]++;//if no images was sent we handle this by returning a error status 404
res.status(404).send("no images");cov_2h99awej7m().s[16]++;return;}else{cov_2h99awej7m().b[1][1]++;//get image data from disk using path (use fs package)
//use the file paths to send the images to the c++ program to find the images
//temp store file 
var dir=(cov_2h99awej7m().s[17]++,""+req.user+"-"+Date.now());cov_2h99awej7m().s[18]++;fs.mkdirSync(dir);cov_2h99awej7m().s[19]++;for(let image of images["images[]"]){cov_2h99awej7m().s[20]++;fs.copyFileSync(image.path,path.join(dir,image.name));}//connect c++ program here and send file name when done c++ deletes file
//using spawn as a chid-process 
const ls=(cov_2h99awej7m().s[21]++,spawn('./smfAlgorithm/Code/main',[dir]));cov_2h99awej7m().s[22]++;ls.on('close',code=>{cov_2h99awej7m().f[2]++;cov_2h99awej7m().s[23]++;if(code==0){cov_2h99awej7m().b[2][0]++;//every thing is fine 
//check that stl exists and store it in the db
//write to the db 
//read from disk with directory
var stlFile=(cov_2h99awej7m().s[24]++,fs.createReadStream(dir+"/stlFile.stl"));const options=(cov_2h99awej7m().s[25]++,{filename:req.body.consID,contentType:'model/stl'});var attachment=(cov_2h99awej7m().s[26]++,createModel());cov_2h99awej7m().s[27]++;attachment.write(options,stlFile,function(err,saved){cov_2h99awej7m().f[3]++;cov_2h99awej7m().s[28]++;if(err){cov_2h99awej7m().b[3][0]++;cov_2h99awej7m().s[29]++;res.status(500).send("error saving stl file: "+err);}else{cov_2h99awej7m().b[3][1]++;cov_2h99awej7m().s[30]++;res.status(200);}});}else{cov_2h99awej7m().b[2][1]++;cov_2h99awej7m().s[31]++;res.sendStatus(500);}});cov_2h99awej7m().s[32]++;res.status(200);cov_2h99awej7m().s[33]++;return;}});}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlVwbG9hZENvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiZm9ybWlkYWJsZSIsInJlcXVpcmUiLCJjcmVhdGVNb2RlbCIsIm1vbmdvb3NlIiwibXVsdGVyIiwiZnMiLCJwYXRoIiwic3Bhd24iLCJtb2R1bGUiLCJleHBvcnRzIiwidXBsb2FkSW1hZ2VzIiwicmVxIiwicmVzIiwiZm9ybSIsIm11bHRpcGxlcyIsInBhcnNlIiwiZXJyIiwiZmllbGRzIiwiZmlsZXMiLCJjb25zb2xlIiwibG9nIiwiaW1hZ2VzIiwic3RhdHVzIiwic2VuZCIsImRpciIsInVzZXIiLCJEYXRlIiwibm93IiwibWtkaXJTeW5jIiwiaW1hZ2UiLCJjb3B5RmlsZVN5bmMiLCJqb2luIiwibmFtZSIsImxzIiwib24iLCJjb2RlIiwic3RsRmlsZSIsImNyZWF0ZVJlYWRTdHJlYW0iLCJvcHRpb25zIiwiZmlsZW5hbWUiLCJib2R5IiwiY29uc0lEIiwiY29udGVudFR5cGUiLCJhdHRhY2htZW50Iiwid3JpdGUiLCJzYXZlZCIsInNlbmRTdGF0dXMiXSwibWFwcGluZ3MiOiJ3dUlBZVk7MkZBZlo7QUFDQTtBQUVBLEtBQU1BLENBQUFBLFVBQVUsMEJBQUdDLE9BQU8sQ0FBQyxZQUFELENBQVYsQ0FBaEIsQ0FDQSxLQUFNLENBQUVDLFdBQUYsMkJBQWtCRCxPQUFPLENBQUMsaUJBQUQsQ0FBekIsQ0FBTixDQUNBLEtBQU1FLENBQUFBLFFBQVEsMEJBQUdGLE9BQU8sQ0FBQyxVQUFELENBQVYsQ0FBZCxDQUNBLEtBQU1HLENBQUFBLE1BQU0sMEJBQUdILE9BQU8sQ0FBQyxRQUFELENBQVYsQ0FBWixDQUNBLEtBQU1JLENBQUFBLEVBQUUsMEJBQUdKLE9BQU8sQ0FBQyxJQUFELENBQVYsQ0FBUixDQUNBLEtBQU1LLENBQUFBLElBQUksMEJBQUdMLE9BQU8sQ0FBQyxNQUFELENBQVYsQ0FBVixDQUNBLEtBQU0sQ0FBRU0sS0FBRiwyQkFBWU4sT0FBTyxDQUFDLGVBQUQsQ0FBbkIsQ0FBTixDLHdCQUdBTyxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsQ0FFakI7QUFDQTtBQUNBO0FBQ0lDLFlBQVksQ0FBRSxTQUFTQyxHQUFULENBQWNDLEdBQWQsQ0FBa0IseUJBRTVCLEtBQU1DLENBQUFBLElBQUksMEJBQUdiLFVBQVUsQ0FBQyxDQUFFYyxTQUFTLENBQUUsSUFBYixDQUFELENBQWIsQ0FBVixDQUY0Qix3QkFJNUJELElBQUksQ0FBQ0UsS0FBTCxDQUFXSixHQUFYLENBQWdCLENBQUNLLEdBQUQsQ0FBTUMsTUFBTixDQUFjQyxLQUFkLEdBQ2hCLGtEQUNJLEdBQUdGLEdBQUgsQ0FDQSxxREFDSUcsT0FBTyxDQUFDQyxHQUFSLENBQVlKLEdBQVosRUFESix5QkFFSSxPQUNILENBSkQsaUNBS0EsS0FBTUssQ0FBQUEsTUFBTSwyQkFBR0gsS0FBSCxDQUFaLENBTkoseUJBUUksR0FBSSxDQUFDRyxNQUFMLENBQ0EscURBQ0k7QUFDQVQsR0FBRyxDQUFDVSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsV0FBckIsRUFGSix5QkFHSSxPQUNILENBTEQsSUFNSyw0QkFDRDtBQUNBO0FBRUE7QUFDQSxHQUFJQyxDQUFBQSxHQUFHLDJCQUFDLEdBQUdiLEdBQUcsQ0FBQ2MsSUFBUCxDQUFZLEdBQVosQ0FBZ0JDLElBQUksQ0FBQ0MsR0FBTCxFQUFqQixDQUFQLENBTEMseUJBTUR0QixFQUFFLENBQUN1QixTQUFILENBQWFKLEdBQWIsRUFOQyx5QkFPRCxJQUFLLEdBQUlLLENBQUFBLEtBQVQsR0FBa0JSLENBQUFBLE1BQU0sQ0FBQyxVQUFELENBQXhCLENBQXVDLDBCQUNuQ2hCLEVBQUUsQ0FBQ3lCLFlBQUgsQ0FBZ0JELEtBQUssQ0FBQ3ZCLElBQXRCLENBQTRCQSxJQUFJLENBQUN5QixJQUFMLENBQVVQLEdBQVYsQ0FBZUssS0FBSyxDQUFDRyxJQUFyQixDQUE1QixFQUNILENBRUQ7QUFDQTtBQUNBLEtBQU1DLENBQUFBLEVBQUUsMkJBQUcxQixLQUFLLENBQUMsMEJBQUQsQ0FBNkIsQ0FBQ2lCLEdBQUQsQ0FBN0IsQ0FBUixDQUFSLENBYkMseUJBZ0JEUyxFQUFFLENBQUNDLEVBQUgsQ0FBTSxPQUFOLENBQWVDLElBQUksRUFBRSxrREFDakIsR0FBSUEsSUFBSSxFQUFHLENBQVgsQ0FDQSw0QkFDSTtBQUVBO0FBQ0E7QUFDQTtBQUVBLEdBQUlDLENBQUFBLE9BQU8sMkJBQUcvQixFQUFFLENBQUNnQyxnQkFBSCxDQUFvQmIsR0FBRyxDQUFDLGNBQXhCLENBQUgsQ0FBWCxDQUNBLEtBQU1jLENBQUFBLE9BQU8sMkJBQUksQ0FBRUMsUUFBUSxDQUFFNUIsR0FBRyxDQUFDNkIsSUFBSixDQUFTQyxNQUFyQixDQUE4QkMsV0FBVyxDQUFFLFdBQTNDLENBQUosQ0FBYixDQUVBLEdBQUlDLENBQUFBLFVBQVUsMkJBQUd6QyxXQUFXLEVBQWQsQ0FBZCxDQVZKLHlCQVdJeUMsVUFBVSxDQUFDQyxLQUFYLENBQWlCTixPQUFqQixDQUEyQkYsT0FBM0IsQ0FBcUMsU0FBU3BCLEdBQVQsQ0FBYzZCLEtBQWQsQ0FBb0Isa0RBRXJELEdBQUk3QixHQUFKLENBQ0EscURBQ0lKLEdBQUcsQ0FBQ1UsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLDBCQUEyQlAsR0FBaEQsRUFDSCxDQUhELElBSUkscURBQ0FKLEdBQUcsQ0FBQ1UsTUFBSixDQUFXLEdBQVgsRUFDSCxDQUNKLENBVEQsRUFXSCxDQXZCRCxJQXdCSyxxREFDRFYsR0FBRyxDQUFDa0MsVUFBSixDQUFlLEdBQWYsRUFDSCxDQUNKLENBNUJELEVBaEJDLHlCQThDRGxDLEdBQUcsQ0FBQ1UsTUFBSixDQUFXLEdBQVgsRUE5Q0MseUJBK0NELE9BQ0gsQ0FDSixDQWhFRCxFQWtFSCxDQTNFWSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8vZmlsZSBjcmVhdGVzIGJ5OiBKYWNvYnVzIEphbnNlIHZhbiBSZW5zYnVyZ1xuLy9jb250cm9sbGVyIGZvciBhbGwgdGhlIHVwbG9hZHMgYW5kIHJldHJpZXZhbHMgYXMgd2VsbCBhcyB0aGUgaW50ZWdyYXRpbmcgb2YgdGhlIGMrKyBwcm9ncmFtIFxuXG5jb25zdCBmb3JtaWRhYmxlID0gcmVxdWlyZShcImZvcm1pZGFibGVcIik7XG5jb25zdCB7IGNyZWF0ZU1vZGVsIH0gPSByZXF1aXJlKCdtb25nb29zZS1ncmlkZnMnKTtcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xuY29uc3QgbXVsdGVyID0gcmVxdWlyZSgnbXVsdGVyJyk7XG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgeyBzcGF3biB9ID0gcmVxdWlyZSgnY2hpbGRfcHJvY2VzcycpO1xuXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIFxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEZ1bmN0aW9uIGRldmVsb3BlZCBieTogSmFjb2J1cyBKYW5zZSB2YW4gUmVuc2J1cmdcbi8vIEZ1bmN0aW9uIHVzZWQgdG8gdXBsb2FkIG11bHRpcGxlIGltYWdlcyAsIHN0b3JlIHRoZW0gaW4gYSB0ZW1wIGRpcmVjdG9yeS9maWxlIGFuZCBzdGFydCB0aGUgYysrIHByb2dyYW1cbiAgICB1cGxvYWRJbWFnZXM6IGZ1bmN0aW9uKHJlcSwgcmVzKXtcblxuICAgICAgICBjb25zdCBmb3JtID0gZm9ybWlkYWJsZSh7IG11bHRpcGxlczogdHJ1ZSB9KTtcblxuICAgICAgICBmb3JtLnBhcnNlKHJlcSwgKGVyciwgZmllbGRzLCBmaWxlcykgPT4gXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKGVycilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGltYWdlcyA9IGZpbGVzO1xuXG4gICAgICAgICAgICBpZiAoIWltYWdlcylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvL2lmIG5vIGltYWdlcyB3YXMgc2VudCB3ZSBoYW5kbGUgdGhpcyBieSByZXR1cm5pbmcgYSBlcnJvciBzdGF0dXMgNDA0XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoXCJubyBpbWFnZXNcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy9nZXQgaW1hZ2UgZGF0YSBmcm9tIGRpc2sgdXNpbmcgcGF0aCAodXNlIGZzIHBhY2thZ2UpXG4gICAgICAgICAgICAgICAgLy91c2UgdGhlIGZpbGUgcGF0aHMgdG8gc2VuZCB0aGUgaW1hZ2VzIHRvIHRoZSBjKysgcHJvZ3JhbSB0byBmaW5kIHRoZSBpbWFnZXNcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvL3RlbXAgc3RvcmUgZmlsZSBcbiAgICAgICAgICAgICAgICB2YXIgZGlyPVwiXCIrcmVxLnVzZXIrXCItXCIrRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgIGZzLm1rZGlyU3luYyhkaXIpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGltYWdlIG9mIGltYWdlc1tcImltYWdlc1tdXCJdICkge1xuICAgICAgICAgICAgICAgICAgICBmcy5jb3B5RmlsZVN5bmMoaW1hZ2UucGF0aCwgcGF0aC5qb2luKGRpciwgaW1hZ2UubmFtZSkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vY29ubmVjdCBjKysgcHJvZ3JhbSBoZXJlIGFuZCBzZW5kIGZpbGUgbmFtZSB3aGVuIGRvbmUgYysrIGRlbGV0ZXMgZmlsZVxuICAgICAgICAgICAgICAgIC8vdXNpbmcgc3Bhd24gYXMgYSBjaGlkLXByb2Nlc3MgXG4gICAgICAgICAgICAgICAgY29uc3QgbHMgPSBzcGF3bignLi9zbWZBbGdvcml0aG0vQ29kZS9tYWluJywgW2Rpcl0pO1xuXG5cbiAgICAgICAgICAgICAgICBscy5vbignY2xvc2UnLCBjb2RlPT57XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2RlID09MCApXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZXZlcnkgdGhpbmcgaXMgZmluZSBcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jaGVjayB0aGF0IHN0bCBleGlzdHMgYW5kIHN0b3JlIGl0IGluIHRoZSBkYlxuICAgICAgICAgICAgICAgICAgICAgICAgLy93cml0ZSB0byB0aGUgZGIgXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3JlYWQgZnJvbSBkaXNrIHdpdGggZGlyZWN0b3J5XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGxGaWxlID0gZnMuY3JlYXRlUmVhZFN0cmVhbShkaXIrXCIvc3RsRmlsZS5zdGxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25zID0gKHsgZmlsZW5hbWU6IHJlcS5ib2R5LmNvbnNJRCAsIGNvbnRlbnRUeXBlOiAnbW9kZWwvc3RsJyB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF0dGFjaG1lbnQgPSBjcmVhdGVNb2RlbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudC53cml0ZShvcHRpb25zICwgc3RsRmlsZSAsIGZ1bmN0aW9uKGVyciwgc2F2ZWQpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGVycilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwiZXJyb3Igc2F2aW5nIHN0bCBmaWxlOiBcIisgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG59Il19